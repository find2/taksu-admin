<ng-container *transloco="let t">
    <div class="flex flex-col flex-auto min-w-0">
        <!-- Main -->
        <div class="flex-auto p-6 sm:p-10">
            <!-- CONTENT GOES HERE -->
            <div class="flex flex-col mt-8 p-8 pb-4 mb-8 bg-card rounded-2xl shadow overflow-hidden">
                <!-- Alert for add asset -->
                <fuse-alert [appearance]="'soft'" [dismissible]="true" [dismissed]="false" [name]="'alertBox1'" [type]="'success'" *ngIf="isValidFormSubmitted">
                    {{ t("New leave added successfully!") }}
                </fuse-alert>

                <fuse-alert [appearance]="'soft'" [dismissible]="true" [dismissed]="false" [name]="'alertBox2'" [type]="'error'" *ngIf="isValidFormSubmitted === false">
                    {{ t("Error adding new leave!") }}
                </fuse-alert>
                <!-- Alert for update asset  -->
                <fuse-alert [appearance]="'soft'" [dismissible]="true" [dismissed]="false" [name]="'alertBox3'" [type]="'success'" *ngIf="isValidUpdated">
                    {{ t("Leave information successfully updated!") }}
                </fuse-alert>

                <fuse-alert [appearance]="'soft'" [dismissible]="true" [dismissed]="false" [name]="'alertBox4'" [type]="'error'" *ngIf="isValidUpdated === false">
                    {{ t("Error updating leave information!") }}
                </fuse-alert>

                <mat-form-field appearance="outline">
                    <mat-label>
                        {{ t("Search") }}
                    </mat-label>
                    <input matInput (keyup)="search($event)" placeholder="{{ t('Search') }}" #input />
                </mat-form-field>
                <div class="flex mb-3">
                    <button mat-flat-button color="primary" (click)="openDialog('Add', {})">
                        <mat-icon>add</mat-icon>

                            {{ t("Add Leave") }}
                    </button>
                </div>

                <div class="table-container overflow-x-auto">
                    <table mat-table [dataSource]="dataSource" matSort class="w-full overflow-x-auto" matSort (matSortChange)="announceSortChange($event)">
                        <ng-container matColumnDef="leaveType">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                {{ t("Type Leave") }}
                            </th>
                            <td mat-cell *matCellDef="let element">
                                <div *ngIf="element.leaveType === 'annual'">
                                    {{ t("Annual Leave") }}
                                </div>
                                <div *ngIf="element.leaveType === 'sick'">
                                    {{ t("Sick Leave") }}
                                </div>
                                <div *ngIf="element.leaveType === 'emergency'">
                                    {{ t("Emergency Leave") }}
                                </div>
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="startLeaveDate">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                {{ t("Start Date") }}
                            </th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.startLeaveDate | date: 'mediumDate' }}
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="endLeaveDate">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                {{ t("End Date") }}
                            </th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.endLeaveDate | date: 'mediumDate' }}
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="startLeaveTime">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                {{ t("Start Time") }}
                            </th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.startLeaveTime }}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="endLeaveTime">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                {{ t("End Time") }}
                            </th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.endLeaveTime }}
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="description">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                {{ t("Description") }}
                            </th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.description }}
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="status">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                {{ t("Status") }}
                            </th>
                            <td mat-cell *matCellDef="let element">
                                <span *ngIf="element.status === 'unapprove'" class="bg-gray-300 text-gray-800 text-xs font-bold rounded-md px-2 py-1">
                                    Unapprove
                                </span>
                                <span *ngIf="element.status === 'approve'" class="bg-green-700 text-white text-xs font-bold rounded-md px-2 py-1">
                                    Approve
                                </span>
                                <span *ngIf="element.status === 'reject'" class="bg-red-700 text-white text-xs font-bold rounded-md px-2 py-1">
                                    Rejected
                                </span>
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="actions">
                            <th mat-header-cell *matHeaderCellDef>
                                {{ t("Actions") }}
                            </th>
                            <td mat-cell *matCellDef="let element">
                                <button *ngIf="element.status === 'unapprove' || element.leaveType === 'sick'" mat-icon-button (click)="openDialog('Update', element)">
                                    <mat-icon>edit</mat-icon>
                                </button>
                                <button *ngIf="element.status === 'unapprove'" mat-icon-button (click)="deleteLeaves(element.id)">
                                    <mat-icon>delete</mat-icon>
                                </button>
                            </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
                    </table>
                </div>
                <mat-paginator [pageSizeOptions]="[5, 10, 20]" aria-label="Select page of periodic elements">
                </mat-paginator>
            </div>


        </div>
    </div>
</ng-container>
